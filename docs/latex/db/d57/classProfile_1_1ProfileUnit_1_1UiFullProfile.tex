\hypertarget{classProfile_1_1ProfileUnit_1_1UiFullProfile}{\subsection{Referência da Classe Profile.\-Profile\-Unit.\-Ui\-Full\-Profile}
\label{classProfile_1_1ProfileUnit_1_1UiFullProfile}\index{Profile.\-Profile\-Unit.\-Ui\-Full\-Profile@{Profile.\-Profile\-Unit.\-Ui\-Full\-Profile}}
}


Camada de apresentação para a página de perfil completa.  


Diagrama de Hierarquia para Profile.\-Profile\-Unit.\-Ui\-Full\-Profile\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{db/d57/classProfile_1_1ProfileUnit_1_1UiFullProfile}
\end{center}
\end{figure}
\subsubsection*{Métodos Públicos}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_ae9ec0c6554ceb52fd45d48dda2ea4218}{\-\_\-\-\_\-init\-\_\-\-\_\-}
\item 
def \hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_a7a7747246b627020a345f7a3eac27778}{run}
\end{DoxyCompactItemize}
\subsubsection*{Atributos Públicos}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_a47049f3f61c7fada93dd84fccd19a2bd}{bus}
\end{DoxyCompactItemize}


\subsubsection{Descrição Detalhada}
Deve ser capaz de gerar uma página que disponibilize os dados do usuário, permitindo que ele edite ou não, alguns campos. Caso a \hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_a7a7747246b627020a345f7a3eac27778}{run()} seja chamada com um argumento adicional field, a chamada será considerada assíncrona, assim como no caso do request.\-method ser P\-O\-S\-T. 

Definição na linha \hyperlink{ProfileUnit_8py_source_l00163}{163} do arquivo \hyperlink{ProfileUnit_8py_source}{Profile\-Unit.\-py}.



\subsubsection{Construtores \& Destrutores}
\hypertarget{classProfile_1_1ProfileUnit_1_1UiFullProfile_ae9ec0c6554ceb52fd45d48dda2ea4218}{\index{Profile\-::\-Profile\-Unit\-::\-Ui\-Full\-Profile@{Profile\-::\-Profile\-Unit\-::\-Ui\-Full\-Profile}!\-\_\-\-\_\-init\-\_\-\-\_\-@{\-\_\-\-\_\-init\-\_\-\-\_\-}}
\index{\-\_\-\-\_\-init\-\_\-\-\_\-@{\-\_\-\-\_\-init\-\_\-\-\_\-}!Profile::ProfileUnit::UiFullProfile@{Profile\-::\-Profile\-Unit\-::\-Ui\-Full\-Profile}}
\paragraph[{\-\_\-\-\_\-init\-\_\-\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}def Profile.\-Profile\-Unit.\-Ui\-Full\-Profile.\-\_\-\-\_\-init\-\_\-\-\_\- (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{bus}
\end{DoxyParamCaption}
)}}\label{classProfile_1_1ProfileUnit_1_1UiFullProfile_ae9ec0c6554ceb52fd45d48dda2ea4218}


Definição na linha \hyperlink{ProfileUnit_8py_source_l00180}{180} do arquivo \hyperlink{ProfileUnit_8py_source}{Profile\-Unit.\-py}.



Referências \hyperlink{ProfileUnit_8py_source_l00166}{Profile.\-Profile\-Unit.\-Ui\-Full\-Profile.\-\_\-\-\_\-editable} e \hyperlink{ProfileUnit_8py_source_l00174}{Profile.\-Profile\-Unit.\-Ui\-Full\-Profile.\-\_\-\-\_\-viewable}.


\begin{DoxyCode}
\hypertarget{classProfile_1_1ProfileUnit_1_1UiFullProfile_l00180}{}\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_ae9ec0c6554ceb52fd45d48dda2ea4218}{00180} 
00181     \textcolor{keyword}{def }\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_ae9ec0c6554ceb52fd45d48dda2ea4218}{\_\_init\_\_}(self, bus):
00182         self.\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_a92a8fe9852ca9a15af9f0b3b1f7f3475}{\_\_viewable} += self.\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_ad83bd84ca790c9c849a29ff074848bd4}{\_\_editable}
\hypertarget{classProfile_1_1ProfileUnit_1_1UiFullProfile_l00183}{}\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_a47049f3f61c7fada93dd84fccd19a2bd}{00183}         \textcolor{keywordflow}{try}:
00184             self.\hyperlink{classProfile_1_1ProfileUnit_1_1IfUiProfile_a32a87d193e5d14e0ff3125d6bab2c420}{bus} = bus
00185         \textcolor{keywordflow}{except} TypeError \textcolor{keyword}{as} exc:
00186             del self
00187             \textcolor{keywordflow}{raise} exc

\end{DoxyCode}


\subsubsection{Métodos}
\hypertarget{classProfile_1_1ProfileUnit_1_1UiFullProfile_a7a7747246b627020a345f7a3eac27778}{\index{Profile\-::\-Profile\-Unit\-::\-Ui\-Full\-Profile@{Profile\-::\-Profile\-Unit\-::\-Ui\-Full\-Profile}!run@{run}}
\index{run@{run}!Profile::ProfileUnit::UiFullProfile@{Profile\-::\-Profile\-Unit\-::\-Ui\-Full\-Profile}}
\paragraph[{run}]{\setlength{\rightskip}{0pt plus 5cm}def Profile.\-Profile\-Unit.\-Ui\-Full\-Profile.\-run (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{request, }
\item[{}]{field = {\ttfamily None}}
\end{DoxyParamCaption}
)}}\label{classProfile_1_1ProfileUnit_1_1UiFullProfile_a7a7747246b627020a345f7a3eac27778}


Definição na linha \hyperlink{ProfileUnit_8py_source_l00202}{202} do arquivo \hyperlink{ProfileUnit_8py_source}{Profile\-Unit.\-py}.



Referências \hyperlink{ProfileUnit_8py_source_l00189}{Profile.\-Profile\-Unit.\-Ui\-Full\-Profile.\-\_\-\-\_\-make\-Data()}.


\begin{DoxyCode}
\hypertarget{classProfile_1_1ProfileUnit_1_1UiFullProfile_l00202}{}\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_a7a7747246b627020a345f7a3eac27778}{00202} 
00203     \textcolor{keyword}{def }\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_a7a7747246b627020a345f7a3eac27778}{run}(self, request, field=None):
00204 
00205         get\_user = \textcolor{keyword}{lambda}: request.session[\textcolor{stringliteral}{'user'}]
00206 
00207         \textcolor{comment}{## @if Verifica qual o propósito do submit.}
00208         \textcolor{comment}{#   Caso seja POST, a requisição ocorre após a submissão de uma form,}
00209         \textcolor{comment}{#       muito provavelmente da form de edição de campo.}
00210         \textcolor{comment}{#   Caso não seja, a requisição há de ser um GET, para mostrar as}
00211         \textcolor{comment}{#       opções de edição.}
00212         \textcolor{keywordflow}{if} request.method == \textcolor{stringliteral}{"POST"}:
00213 
00214             \textcolor{keywordflow}{try}:
00215                 \textcolor{keywordflow}{if}   \textcolor{stringliteral}{"name"} \textcolor{keywordflow}{in} request.POST:
00216                     form = NameForm(request.POST)
00217                     field = \textcolor{stringliteral}{"name"}
00218                 \textcolor{keywordflow}{elif} \textcolor{stringliteral}{"language"} \textcolor{keywordflow}{in} request.POST:
00219                     form = LanguageForm(request.POST)
00220                     field = \textcolor{stringliteral}{"language"}
00221                 \textcolor{keywordflow}{elif} \textcolor{stringliteral}{"sex"} \textcolor{keywordflow}{in} request.POST:
00222                     form = SexForm(request.POST)
00223                     field = \textcolor{stringliteral}{"sex"}
00224                 \textcolor{keywordflow}{elif} \textcolor{stringliteral}{"bios"} \textcolor{keywordflow}{in} request.POST:
00225                     form = BiosForm(request.POST)
00226                     field = \textcolor{stringliteral}{"bios"}
00227                 \textcolor{keywordflow}{else}:
00228                     \textcolor{keywordflow}{raise} ValueError(lang.DICT[\textcolor{stringliteral}{'EXCEPTION\_INV\_FRM'}])
00229 
00230                 \textcolor{keywordflow}{if} form.is\_valid():
00231                     request.session[\textcolor{stringliteral}{'user'}][field] = self.bus.editField(
00232                                                         request, 
00233                                                         field, 
00234                                                         form )
00235                 \textcolor{keywordflow}{else}:
00236                     \textcolor{keywordflow}{raise} ValueError(lang.DICT[\textcolor{stringliteral}{'EXCEPTION\_INV\_FRM'}] + 
00237                                         \textcolor{stringliteral}{":"} + form.errors)
00238 
00239             \textcolor{keywordflow}{except} ValueError \textcolor{keyword}{as} exc:
00240                 data = self.\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_ae0e9c54df37ab45f0d1c5d894181d10f}{\_\_makeData}(get\_user())
00241                 \textcolor{keywordflow}{return} render(request, \textcolor{stringliteral}{"Profile/full.html"}, \{\textcolor{stringliteral}{'data'} : data,
00242                                                              \textcolor{stringliteral}{'error'}: exc\})
00243 
00244             data = self.\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_ae0e9c54df37ab45f0d1c5d894181d10f}{\_\_makeData}(get\_user())
00245             \textcolor{keywordflow}{return} HttpResponseRedirect(\textcolor{stringliteral}{'/profile'})
00246 
00247         \textcolor{keywordflow}{else}: \textcolor{comment}{# request.method == "GET"}
00248             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} field: \textcolor{comment}{# normal call}
00249                 request.session[\textcolor{stringliteral}{'user'}] = self.bus.refreshUser(request)
00250                 data = self.\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_ae0e9c54df37ab45f0d1c5d894181d10f}{\_\_makeData}(get\_user())
00251                 \textcolor{keywordflow}{return} render(request, \textcolor{stringliteral}{"Profile/full.html"}, \{\textcolor{stringliteral}{'data'} : data\})
00252             \textcolor{keywordflow}{else}: \textcolor{comment}{# ajax call}
00253                 err = \textcolor{keyword}{False}
00254                 \textcolor{keywordflow}{if}   field == \textcolor{stringliteral}{"name"}:
00255                     form = NameForm(initial=\{\textcolor{stringliteral}{'newdata'}:get\_user()[\textcolor{stringliteral}{'name'}]\})
00256                 \textcolor{keywordflow}{elif} field == \textcolor{stringliteral}{"language"}:
00257                     form = LanguageForm(initial=\{
00258                             \textcolor{stringliteral}{'newdata'}:get\_user()[\textcolor{stringliteral}{'language'}]\})
00259                 \textcolor{keywordflow}{elif} field == \textcolor{stringliteral}{"sex"}:
00260                     form = SexForm(initial=\{\textcolor{stringliteral}{'newdata'}:get\_user()[\textcolor{stringliteral}{'sex'}]\})
00261                 \textcolor{keywordflow}{elif} field == \textcolor{stringliteral}{"bios"}:
00262                     form = BiosForm(initial=\{\textcolor{stringliteral}{'newdata'}:get\_user()[\textcolor{stringliteral}{'bios'}]\})
00263                 \textcolor{keywordflow}{else}:
00264                     form = lang.DICT[\textcolor{stringliteral}{"ERROR\_FORM"}]
00265                     err = \textcolor{keyword}{True} 
00266 
00267                 \textcolor{keywordflow}{return} render(request, \textcolor{stringliteral}{"Profile/edit.html"}, \{\textcolor{stringliteral}{'form'}: form,
00268                                                              \textcolor{stringliteral}{'ff'}: field,
00269                                                              \textcolor{stringliteral}{'err'}: err \})
00270         

\end{DoxyCode}


\subsubsection{Atributos}
\hypertarget{classProfile_1_1ProfileUnit_1_1UiFullProfile_a47049f3f61c7fada93dd84fccd19a2bd}{\index{Profile\-::\-Profile\-Unit\-::\-Ui\-Full\-Profile@{Profile\-::\-Profile\-Unit\-::\-Ui\-Full\-Profile}!bus@{bus}}
\index{bus@{bus}!Profile::ProfileUnit::UiFullProfile@{Profile\-::\-Profile\-Unit\-::\-Ui\-Full\-Profile}}
\paragraph[{bus}]{\setlength{\rightskip}{0pt plus 5cm}Profile.\-Profile\-Unit.\-Ui\-Full\-Profile.\-bus}}\label{classProfile_1_1ProfileUnit_1_1UiFullProfile_a47049f3f61c7fada93dd84fccd19a2bd}


Definição na linha \hyperlink{ProfileUnit_8py_source_l00183}{183} do arquivo \hyperlink{ProfileUnit_8py_source}{Profile\-Unit.\-py}.



A documentação para esta classe foi gerada a partir do seguinte arquivo\-:\begin{DoxyCompactItemize}
\item 
E\-L\-O/\-Profile/\hyperlink{ProfileUnit_8py}{Profile\-Unit.\-py}\end{DoxyCompactItemize}
