\hypertarget{classProfile_1_1ProfileUnit_1_1UiFullProfile}{\subsection{Referência da Classe Profile.\-Profile\-Unit.\-Ui\-Full\-Profile}
\label{classProfile_1_1ProfileUnit_1_1UiFullProfile}\index{Profile.\-Profile\-Unit.\-Ui\-Full\-Profile@{Profile.\-Profile\-Unit.\-Ui\-Full\-Profile}}
}


Camada de apresentação para a página de perfil completa.  


Diagrama de Hierarquia para Profile.\-Profile\-Unit.\-Ui\-Full\-Profile\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{db/d57/classProfile_1_1ProfileUnit_1_1UiFullProfile}
\end{center}
\end{figure}
\subsubsection*{Métodos Públicos}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_ae9ec0c6554ceb52fd45d48dda2ea4218}{\-\_\-\-\_\-init\-\_\-\-\_\-}
\item 
def \hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_a7a7747246b627020a345f7a3eac27778}{run}
\end{DoxyCompactItemize}
\subsubsection*{Atributos Públicos}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_a47049f3f61c7fada93dd84fccd19a2bd}{bus}
\end{DoxyCompactItemize}


\subsubsection{Descrição Detalhada}
Deve ser capaz de gerar uma página que disponibilize os dados do usuário, permitindo que ele edite ou não, alguns campos. Caso a \hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_a7a7747246b627020a345f7a3eac27778}{run()} seja chamada com um argumento adicional field, a chamada será considerada assíncrona, assim como no caso do request.\-method ser P\-O\-S\-T. 

Definição na linha \hyperlink{ProfileUnit_8py_source_l00181}{181} do arquivo \hyperlink{ProfileUnit_8py_source}{Profile\-Unit.\-py}.



\subsubsection{Construtores \& Destrutores}
\hypertarget{classProfile_1_1ProfileUnit_1_1UiFullProfile_ae9ec0c6554ceb52fd45d48dda2ea4218}{\index{Profile\-::\-Profile\-Unit\-::\-Ui\-Full\-Profile@{Profile\-::\-Profile\-Unit\-::\-Ui\-Full\-Profile}!\-\_\-\-\_\-init\-\_\-\-\_\-@{\-\_\-\-\_\-init\-\_\-\-\_\-}}
\index{\-\_\-\-\_\-init\-\_\-\-\_\-@{\-\_\-\-\_\-init\-\_\-\-\_\-}!Profile::ProfileUnit::UiFullProfile@{Profile\-::\-Profile\-Unit\-::\-Ui\-Full\-Profile}}
\paragraph[{\-\_\-\-\_\-init\-\_\-\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}def Profile.\-Profile\-Unit.\-Ui\-Full\-Profile.\-\_\-\-\_\-init\-\_\-\-\_\- (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{bus}
\end{DoxyParamCaption}
)}}\label{classProfile_1_1ProfileUnit_1_1UiFullProfile_ae9ec0c6554ceb52fd45d48dda2ea4218}


Definição na linha \hyperlink{ProfileUnit_8py_source_l00203}{203} do arquivo \hyperlink{ProfileUnit_8py_source}{Profile\-Unit.\-py}.



Referências \hyperlink{ProfileUnit_8py_source_l00184}{Profile.\-Profile\-Unit.\-Ui\-Full\-Profile.\-\_\-\-\_\-editable} e \hyperlink{ProfileUnit_8py_source_l00197}{Profile.\-Profile\-Unit.\-Ui\-Full\-Profile.\-\_\-\-\_\-viewable}.


\begin{DoxyCode}
\hypertarget{classProfile_1_1ProfileUnit_1_1UiFullProfile_l00203}{}\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_ae9ec0c6554ceb52fd45d48dda2ea4218}{00203} 
00204     \textcolor{keyword}{def }\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_ae9ec0c6554ceb52fd45d48dda2ea4218}{\_\_init\_\_}(self, bus):
00205         self.\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_a92a8fe9852ca9a15af9f0b3b1f7f3475}{\_\_viewable} += self.\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_ad83bd84ca790c9c849a29ff074848bd4}{\_\_editable}
\hypertarget{classProfile_1_1ProfileUnit_1_1UiFullProfile_l00206}{}\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_a47049f3f61c7fada93dd84fccd19a2bd}{00206}         \textcolor{keywordflow}{try}:
00207             self.\hyperlink{classProfile_1_1ProfileUnit_1_1IfUiProfile_a32a87d193e5d14e0ff3125d6bab2c420}{bus} = bus
00208         \textcolor{keywordflow}{except} TypeError \textcolor{keyword}{as} exc:
00209             del self
00210             \textcolor{keywordflow}{raise} exc

\end{DoxyCode}


\subsubsection{Métodos}
\hypertarget{classProfile_1_1ProfileUnit_1_1UiFullProfile_a7a7747246b627020a345f7a3eac27778}{\index{Profile\-::\-Profile\-Unit\-::\-Ui\-Full\-Profile@{Profile\-::\-Profile\-Unit\-::\-Ui\-Full\-Profile}!run@{run}}
\index{run@{run}!Profile::ProfileUnit::UiFullProfile@{Profile\-::\-Profile\-Unit\-::\-Ui\-Full\-Profile}}
\paragraph[{run}]{\setlength{\rightskip}{0pt plus 5cm}def Profile.\-Profile\-Unit.\-Ui\-Full\-Profile.\-run (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{request, }
\item[{}]{field = {\ttfamily None}}
\end{DoxyParamCaption}
)}}\label{classProfile_1_1ProfileUnit_1_1UiFullProfile_a7a7747246b627020a345f7a3eac27778}


Definição na linha \hyperlink{ProfileUnit_8py_source_l00232}{232} do arquivo \hyperlink{ProfileUnit_8py_source}{Profile\-Unit.\-py}.



Referências \hyperlink{ProfileUnit_8py_source_l00212}{Profile.\-Profile\-Unit.\-Ui\-Full\-Profile.\-\_\-\-\_\-make\-Data()}.


\begin{DoxyCode}
\hypertarget{classProfile_1_1ProfileUnit_1_1UiFullProfile_l00232}{}\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_a7a7747246b627020a345f7a3eac27778}{00232} 
00233     \textcolor{keyword}{def }\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_a7a7747246b627020a345f7a3eac27778}{run}(self, request, field=None):
00234 
00235         get\_user = \textcolor{keyword}{lambda}: request.session[\textcolor{stringliteral}{'user'}]
00236 
00237         \textcolor{comment}{## @if Verifica qual o propósito do submit.}
00238         \textcolor{comment}{#   Caso seja POST, a requisição ocorre após a submissão de uma form,}
00239         \textcolor{comment}{#       muito provavelmente da form de edição de campo.}
00240         \textcolor{comment}{#   Caso não seja, a requisição há de ser um GET, para mostrar as}
00241         \textcolor{comment}{#       opções de edição.}
00242         \textcolor{keywordflow}{if} request.method == \textcolor{stringliteral}{"POST"}:
00243 
00244             \textcolor{keywordflow}{try}:
00245                 \textcolor{keywordflow}{if}   \textcolor{stringliteral}{"name"} \textcolor{keywordflow}{in} request.POST:
00246                     form = NameForm(request.POST)
00247                     field = \textcolor{stringliteral}{"name"}
00248                 \textcolor{keywordflow}{if}  \textcolor{stringliteral}{"password"} \textcolor{keywordflow}{in} request.POST:
00249                     form = PasswordForm(request.POST)
00250                     field = \textcolor{stringliteral}{"password"}
00251                 \textcolor{keywordflow}{elif} \textcolor{stringliteral}{"language"} \textcolor{keywordflow}{in} request.POST:
00252                     form = LanguageForm(request.POST)
00253                     field = \textcolor{stringliteral}{"language"}
00254                 \textcolor{keywordflow}{elif} \textcolor{stringliteral}{"sex"} \textcolor{keywordflow}{in} request.POST:
00255                     form = SexForm(request.POST)
00256                     field = \textcolor{stringliteral}{"sex"}
00257                 \textcolor{keywordflow}{elif} \textcolor{stringliteral}{"bios"} \textcolor{keywordflow}{in} request.POST:
00258                     form = BiosForm(request.POST)
00259                     field = \textcolor{stringliteral}{"bios"}
00260                 \textcolor{keywordflow}{elif} \textcolor{stringliteral}{"interests"} \textcolor{keywordflow}{in} request.POST:
00261                     form = InterestsForm(request.POST)
00262                     field = \textcolor{stringliteral}{"interests"}
00263                 \textcolor{keywordflow}{elif} \textcolor{stringliteral}{"avatar"} \textcolor{keywordflow}{in} request.POST:
00264                     form = AvatarForm(request.POST, request.FILES)
00265                     field = \textcolor{stringliteral}{"avatar"}
00266                 \textcolor{keywordflow}{else}:
00267                     \textcolor{keywordflow}{raise} ValueError(lang.DICT[\textcolor{stringliteral}{'EXCEPTION\_INV\_FRM'}])
00268 
00269                 \textcolor{keywordflow}{if} form.is\_valid():
00270                     request.session[\textcolor{stringliteral}{'user'}][field] = self.bus.editField(
00271                                                         request, 
00272                                                         field, 
00273                                                         form )
00274                     request.session.modified = \textcolor{keyword}{True}
00275                 \textcolor{keywordflow}{else}:
00276                     \textcolor{keywordflow}{raise} ValueError(lang.DICT[\textcolor{stringliteral}{'EXCEPTION\_INV\_FRM'}] + 
00277                         \textcolor{stringliteral}{":"} + form.errors)
00278 
00279             \textcolor{keywordflow}{except} ValueError \textcolor{keyword}{as} exc:
00280                 data = self.\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_ae0e9c54df37ab45f0d1c5d894181d10f}{\_\_makeData}(get\_user())
00281                 \textcolor{keywordflow}{return} render(request, \textcolor{stringliteral}{"Profile/full.html"}, \{\textcolor{stringliteral}{'data'} : data,
00282                                                              \textcolor{stringliteral}{'error'}: exc \})
00283 
00284             data = self.\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_ae0e9c54df37ab45f0d1c5d894181d10f}{\_\_makeData}(get\_user())
00285             \textcolor{keywordflow}{return} HttpResponseRedirect(\textcolor{stringliteral}{'/profile'})
00286 
00287         \textcolor{keywordflow}{else}: \textcolor{comment}{# request.method == "GET"}
00288             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} field: \textcolor{comment}{# normal call}
00289                 request.session[\textcolor{stringliteral}{'user'}] = self.bus.refreshUser(request)
00290                 data = self.\hyperlink{classProfile_1_1ProfileUnit_1_1UiFullProfile_ae0e9c54df37ab45f0d1c5d894181d10f}{\_\_makeData}(get\_user())
00291                 l = request.session[\textcolor{stringliteral}{'user'}][\textcolor{stringliteral}{'language'}]
00292                 translation.activate(l)
00293                 request.session[translation.LANGUAGE\_SESSION\_KEY] = l
00294                 \textcolor{keywordflow}{return} render(request, \textcolor{stringliteral}{"Profile/full.html"}, \{\textcolor{stringliteral}{'data'} : data\})
00295             \textcolor{keywordflow}{else}: \textcolor{comment}{# ajax call}
00296                 err = \textcolor{keyword}{False}
00297                 \textcolor{keywordflow}{if}   field == \textcolor{stringliteral}{"name"}:
00298                     form = NameForm(initial=\{\textcolor{stringliteral}{'newdata'}:get\_user()[\textcolor{stringliteral}{'name'}]\})
00299                 \textcolor{keywordflow}{elif} field == \textcolor{stringliteral}{"password"}:
00300                     form = PasswordForm()
00301                 \textcolor{keywordflow}{elif} field == \textcolor{stringliteral}{"language"}:
00302                     form = LanguageForm(initial=\{
00303                             \textcolor{stringliteral}{'newdata'}:get\_user()[\textcolor{stringliteral}{'language'}]\})
00304                 \textcolor{keywordflow}{elif} field == \textcolor{stringliteral}{"sex"}:
00305                     form = SexForm(initial=\{\textcolor{stringliteral}{'newdata'}:get\_user()[\textcolor{stringliteral}{'sex'}]\})
00306                 \textcolor{keywordflow}{elif} field == \textcolor{stringliteral}{"bios"}:
00307                     form = BiosForm(initial=\{\textcolor{stringliteral}{'newdata'}:get\_user()[\textcolor{stringliteral}{'bios'}]\})
00308                 \textcolor{keywordflow}{elif} field == \textcolor{stringliteral}{"interests"}:
00309                     form = InterestsForm(initial=\{
00310                             \textcolor{stringliteral}{'newdata'}:get\_user()[\textcolor{stringliteral}{'interests'}]\})
00311                 \textcolor{keywordflow}{elif} field == \textcolor{stringliteral}{"avatar"}:
00312                     form = AvatarForm()
00313                 \textcolor{keywordflow}{else}:
00314                     form = lang.DICT[\textcolor{stringliteral}{"ERROR\_FORM"}]
00315                     err = \textcolor{keyword}{True} 
00316 
00317                 \textcolor{keywordflow}{return} render(request, \textcolor{stringliteral}{"Profile/edit.html"}, \{\textcolor{stringliteral}{'form'}: form,
00318                                                              \textcolor{stringliteral}{'ff'}: field,
00319                                                              \textcolor{stringliteral}{'err'}: err,
00320                                                             \})
00321         

\end{DoxyCode}


\subsubsection{Atributos}
\hypertarget{classProfile_1_1ProfileUnit_1_1UiFullProfile_a47049f3f61c7fada93dd84fccd19a2bd}{\index{Profile\-::\-Profile\-Unit\-::\-Ui\-Full\-Profile@{Profile\-::\-Profile\-Unit\-::\-Ui\-Full\-Profile}!bus@{bus}}
\index{bus@{bus}!Profile::ProfileUnit::UiFullProfile@{Profile\-::\-Profile\-Unit\-::\-Ui\-Full\-Profile}}
\paragraph[{bus}]{\setlength{\rightskip}{0pt plus 5cm}Profile.\-Profile\-Unit.\-Ui\-Full\-Profile.\-bus}}\label{classProfile_1_1ProfileUnit_1_1UiFullProfile_a47049f3f61c7fada93dd84fccd19a2bd}


Definição na linha \hyperlink{ProfileUnit_8py_source_l00206}{206} do arquivo \hyperlink{ProfileUnit_8py_source}{Profile\-Unit.\-py}.



A documentação para esta classe foi gerada a partir do seguinte arquivo\-:\begin{DoxyCompactItemize}
\item 
E\-L\-O/\-Profile/\hyperlink{ProfileUnit_8py}{Profile\-Unit.\-py}\end{DoxyCompactItemize}
