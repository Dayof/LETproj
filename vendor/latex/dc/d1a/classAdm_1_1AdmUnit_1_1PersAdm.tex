\hypertarget{classAdm_1_1AdmUnit_1_1PersAdm}{}\subsection{Referência da Classe Adm.\+Adm\+Unit.\+Pers\+Adm}
\label{classAdm_1_1AdmUnit_1_1PersAdm}\index{Adm.\+Adm\+Unit.\+Pers\+Adm@{Adm.\+Adm\+Unit.\+Pers\+Adm}}


Camada de persistência para o módulo de administração.  


Diagrama de Hierarquia para Adm.\+Adm\+Unit.\+Pers\+Adm\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{dc/d1a/classAdm_1_1AdmUnit_1_1PersAdm}
\end{center}
\end{figure}
\subsubsection*{Métodos Públicos}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classAdm_1_1AdmUnit_1_1PersAdm_ab9b66eb770103a270de417a6b936ad21}{data\+\_\+in} (self, dict\+\_\+field\+\_\+value, database)
\begin{DoxyCompactList}\small\item\em Insere os dados do registro de contas no banco de dados. \end{DoxyCompactList}\item 
def \hyperlink{classAdm_1_1AdmUnit_1_1PersAdm_a65d586fd8aaf0a9f2f7c609405721dff}{update} (self, username, field, newdata, database)
\begin{DoxyCompactList}\small\item\em Método que atualiza os dados de uma conta fornecida. \end{DoxyCompactList}\item 
def \hyperlink{classAdm_1_1AdmUnit_1_1PersAdm_a2b5453709dfc3b1c6e5f9f85dc61d228}{fetch\+\_\+del} (self, username, database)
\begin{DoxyCompactList}\small\item\em Método que deleta os dados de uma conta fornecida. \end{DoxyCompactList}\item 
def \hyperlink{classAdm_1_1AdmUnit_1_1PersAdm_a0813f79d2ef26ab014c21f4ae2217045}{fetch} (self, username, database)
\begin{DoxyCompactList}\small\item\em Função que recupera todos os dados do usuário. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsubsection{Descrição Detalhada}
Insere, atualiza ou deleta dados do banco de dados referentes aos alunos professores e cursos. 

Definição na linha \hyperlink{AdmUnit_8py_source_l00419}{419} do arquivo \hyperlink{AdmUnit_8py_source}{Adm\+Unit.\+py}.



\subsubsection{Métodos}
\hypertarget{classAdm_1_1AdmUnit_1_1PersAdm_ab9b66eb770103a270de417a6b936ad21}{}\index{Adm\+::\+Adm\+Unit\+::\+Pers\+Adm@{Adm\+::\+Adm\+Unit\+::\+Pers\+Adm}!data\+\_\+in@{data\+\_\+in}}
\index{data\+\_\+in@{data\+\_\+in}!Adm\+::\+Adm\+Unit\+::\+Pers\+Adm@{Adm\+::\+Adm\+Unit\+::\+Pers\+Adm}}
\paragraph[{data\+\_\+in}]{\setlength{\rightskip}{0pt plus 5cm}def Adm.\+Adm\+Unit.\+Pers\+Adm.\+data\+\_\+in (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{dict\+\_\+field\+\_\+value, }
\item[{}]{database}
\end{DoxyParamCaption}
)}\label{classAdm_1_1AdmUnit_1_1PersAdm_ab9b66eb770103a270de417a6b936ad21}


Definição na linha \hyperlink{AdmUnit_8py_source_l00422}{422} do arquivo \hyperlink{AdmUnit_8py_source}{Adm\+Unit.\+py}.


\begin{DoxyCode}
\hypertarget{classAdm_1_1AdmUnit_1_1PersAdm_l00422}{}\hyperlink{classAdm_1_1AdmUnit_1_1PersAdm_ab9b66eb770103a270de417a6b936ad21}{00422}     \textcolor{keyword}{def }\hyperlink{classAdm_1_1AdmUnit_1_1PersAdm_ab9b66eb770103a270de417a6b936ad21}{data\_in}(self, dict\_field\_value, database):
00423         \textcolor{comment}{# Tenta coletar o último id inserido.}
00424         \textcolor{comment}{# Caso não tenha ocorrido nenhum registro de contas então}
00425         \textcolor{comment}{# é atribuído o valor inicial como '1'}
00426         \textcolor{keywordflow}{try}:
00427             \textcolor{comment}{# Coleta o ultimo ID inserido no identity do database.}
00428             lastid = database.objects.order\_by(\textcolor{stringliteral}{'-identity'})[0]
00429             \textcolor{comment}{# Newid será a identity do novo usuário.}
00430             newid = lastid.identity + 1
00431         \textcolor{keywordflow}{except} IndexError:
00432             newid = 1
00433         
00434         \textcolor{comment}{# Percorre o dicionário ligado aos campos a seu valores.}
00435         \textcolor{keywordflow}{for} fields \textcolor{keywordflow}{in} dict\_field\_value:
00436             \textcolor{comment}{# Insere novos dados: identidade, campo e a novo valor.}
00437             data = database(identity=newid, field=fields,
00438                              value=dict\_field\_value[fields])
00439             \textcolor{comment}{# Salva os novos dados no database.}
00440             data.save()
00441 
\end{DoxyCode}
\hypertarget{classAdm_1_1AdmUnit_1_1PersAdm_a0813f79d2ef26ab014c21f4ae2217045}{}\index{Adm\+::\+Adm\+Unit\+::\+Pers\+Adm@{Adm\+::\+Adm\+Unit\+::\+Pers\+Adm}!fetch@{fetch}}
\index{fetch@{fetch}!Adm\+::\+Adm\+Unit\+::\+Pers\+Adm@{Adm\+::\+Adm\+Unit\+::\+Pers\+Adm}}
\paragraph[{fetch}]{\setlength{\rightskip}{0pt plus 5cm}def Adm.\+Adm\+Unit.\+Pers\+Adm.\+fetch (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{username, }
\item[{}]{database}
\end{DoxyParamCaption}
)}\label{classAdm_1_1AdmUnit_1_1PersAdm_a0813f79d2ef26ab014c21f4ae2217045}


Definição na linha \hyperlink{AdmUnit_8py_source_l00511}{511} do arquivo \hyperlink{AdmUnit_8py_source}{Adm\+Unit.\+py}.



Referências \hyperlink{AdmUnit_8py_source_l00495}{Adm.\+Adm\+Unit.\+Pers\+Adm.\+\_\+\+\_\+select\+\_\+field()}.


\begin{DoxyCode}
\hypertarget{classAdm_1_1AdmUnit_1_1PersAdm_l00511}{}\hyperlink{classAdm_1_1AdmUnit_1_1PersAdm_a0813f79d2ef26ab014c21f4ae2217045}{00511}     \textcolor{keyword}{def }\hyperlink{classAdm_1_1AdmUnit_1_1PersAdm_a0813f79d2ef26ab014c21f4ae2217045}{fetch}(self, username, database):
00512 
00513         \textcolor{keywordflow}{try}:
00514             uid = database.objects.get(field=\textcolor{stringliteral}{'NAME'},value=username)
00515             uid = uid.identity
00516 
00517             sf = \textcolor{keyword}{lambda} x: self.\hyperlink{classAdm_1_1AdmUnit_1_1PersAdm_aa30c5e73f6bfa1c525007624caebaaa3}{\_\_select\_field}(uid, x, database)
00518 
00519             fetchset = [
00520                     (\textcolor{stringliteral}{'password'},    sf(\textcolor{stringliteral}{'PASSWORD'})),
00521                     (\textcolor{stringliteral}{'matric'},      sf(\textcolor{stringliteral}{'MATRIC'})),
00522                     (\textcolor{stringliteral}{'bios'},        sf(\textcolor{stringliteral}{'BIOS'})),
00523                     (\textcolor{stringliteral}{'campus'},      sf(\textcolor{stringliteral}{'CAMPUS'})),
00524                     (\textcolor{stringliteral}{'courses'},     sf(\textcolor{stringliteral}{'COURSE'})),
00525                     (\textcolor{stringliteral}{'avatar'},      sf(\textcolor{stringliteral}{'AVATAR'})),
00526                     (\textcolor{stringliteral}{'email'},       sf(\textcolor{stringliteral}{'EMAIL'})),
00527                     (\textcolor{stringliteral}{'sex'},         sf(\textcolor{stringliteral}{'SEX'})),
00528             ]
00529 
00530             \textcolor{keywordflow}{if} database \textcolor{keywordflow}{is} Student:
00531                 fetchset = fetchset + [     
00532                     (\textcolor{stringliteral}{'grades'},      sf(\textcolor{stringliteral}{'GRADE'})),
00533                     (\textcolor{stringliteral}{'interests'},   sf(\textcolor{stringliteral}{'INTEREST'})),
00534                     (\textcolor{stringliteral}{'language'},    sf(\textcolor{stringliteral}{'LANGUAGE'})),
00535                 ]
00536 
00537         \textcolor{keywordflow}{except} database.DoesNotExist \textcolor{keyword}{as} exc:
00538             fetchset = []
00539 
00540         \textcolor{keywordflow}{return} fetchset
00541 
00542 
00543 \end{DoxyCode}
\hypertarget{classAdm_1_1AdmUnit_1_1PersAdm_a2b5453709dfc3b1c6e5f9f85dc61d228}{}\index{Adm\+::\+Adm\+Unit\+::\+Pers\+Adm@{Adm\+::\+Adm\+Unit\+::\+Pers\+Adm}!fetch\+\_\+del@{fetch\+\_\+del}}
\index{fetch\+\_\+del@{fetch\+\_\+del}!Adm\+::\+Adm\+Unit\+::\+Pers\+Adm@{Adm\+::\+Adm\+Unit\+::\+Pers\+Adm}}
\paragraph[{fetch\+\_\+del}]{\setlength{\rightskip}{0pt plus 5cm}def Adm.\+Adm\+Unit.\+Pers\+Adm.\+fetch\+\_\+del (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{username, }
\item[{}]{database}
\end{DoxyParamCaption}
)}\label{classAdm_1_1AdmUnit_1_1PersAdm_a2b5453709dfc3b1c6e5f9f85dc61d228}


Definição na linha \hyperlink{AdmUnit_8py_source_l00469}{469} do arquivo \hyperlink{AdmUnit_8py_source}{Adm\+Unit.\+py}.


\begin{DoxyCode}
\hypertarget{classAdm_1_1AdmUnit_1_1PersAdm_l00469}{}\hyperlink{classAdm_1_1AdmUnit_1_1PersAdm_a2b5453709dfc3b1c6e5f9f85dc61d228}{00469}     \textcolor{keyword}{def }\hyperlink{classAdm_1_1AdmUnit_1_1PersAdm_a2b5453709dfc3b1c6e5f9f85dc61d228}{fetch\_del}(self, username, database):
00470         \textcolor{comment}{# Tenta procurar se o username existe no banco de dados.}
00471         \textcolor{comment}{# Caso não exista, é emitido um erro.}
00472         \textcolor{keywordflow}{try}:
00473             \textcolor{comment}{# Filtra o database pelo nome do usuario.}
00474             uid = database.objects.get(field=\textcolor{stringliteral}{'NAME'},value=username)
00475             \textcolor{comment}{# Coleta a ID do usuário}
00476             uid = uid.identity
00477 
00478         \textcolor{comment}{# Caso usuário não exista, então é retornado para o Business}
00479         \textcolor{comment}{# que não foi encontrado.}
00480         \textcolor{keywordflow}{except} database.DoesNotExist:
00481             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00482 
00483         \textcolor{comment}{# Tenta filtrar os dados de um ID.}
00484         \textcolor{comment}{# Caso não exista, é emitido um erro.}
00485         \textcolor{keywordflow}{try}:   
00486             \textcolor{comment}{# Lista da filtragem dos dados de um determinado ID.}
00487             accdel = database.objects.filter(identity=uid)
00488             \textcolor{comment}{# Lista dos dados é deletada do database.}
00489             accdel.delete()
00490        
00491         \textcolor{keywordflow}{except} ( database.DoesNotExist, 
00492                 database.MultipleObjectsReturned ) \textcolor{keyword}{as} exc:
00493             \textcolor{keywordflow}{raise} ValueError(exc)
00494 
\end{DoxyCode}
\hypertarget{classAdm_1_1AdmUnit_1_1PersAdm_a65d586fd8aaf0a9f2f7c609405721dff}{}\index{Adm\+::\+Adm\+Unit\+::\+Pers\+Adm@{Adm\+::\+Adm\+Unit\+::\+Pers\+Adm}!update@{update}}
\index{update@{update}!Adm\+::\+Adm\+Unit\+::\+Pers\+Adm@{Adm\+::\+Adm\+Unit\+::\+Pers\+Adm}}
\paragraph[{update}]{\setlength{\rightskip}{0pt plus 5cm}def Adm.\+Adm\+Unit.\+Pers\+Adm.\+update (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{username, }
\item[{}]{field, }
\item[{}]{newdata, }
\item[{}]{database}
\end{DoxyParamCaption}
)}\label{classAdm_1_1AdmUnit_1_1PersAdm_a65d586fd8aaf0a9f2f7c609405721dff}


Definição na linha \hyperlink{AdmUnit_8py_source_l00443}{443} do arquivo \hyperlink{AdmUnit_8py_source}{Adm\+Unit.\+py}.


\begin{DoxyCode}
\hypertarget{classAdm_1_1AdmUnit_1_1PersAdm_l00443}{}\hyperlink{classAdm_1_1AdmUnit_1_1PersAdm_a65d586fd8aaf0a9f2f7c609405721dff}{00443}     \textcolor{keyword}{def }\hyperlink{classAdm_1_1AdmUnit_1_1PersAdm_a65d586fd8aaf0a9f2f7c609405721dff}{update}(self, username, field, newdata, database): 
00444         \textcolor{comment}{# Tenta procurar se o username existe no banco de dados.}
00445         \textcolor{comment}{# Caso não exista, é emitido um erro.}
00446         \textcolor{keywordflow}{try}:
00447             \textcolor{comment}{# Filtra o database pelo nome do usuario.}
00448             uid = database.objects.get(field=\textcolor{stringliteral}{'NAME'}, value=username)
00449             \textcolor{comment}{# Coleta a ID do usuário encontrado.}
00450             uid = uid.identity
00451                 
00452             \textcolor{keywordflow}{try}:
00453                 \textcolor{comment}{# Coleta a partir do ID do usuário o valor do campo}
00454                 \textcolor{comment}{# que deseja atualizar.}
00455                 data = database.objects.get(identity=uid, field=field.upper())
00456                 \textcolor{comment}{# Nova informação é colocada no tipo que deseja atualizar.}
00457                 data.value = newdata
00458             \textcolor{comment}{# Caso o novo valor a ser colocado já exista então este continua o mesmo.}
00459             \textcolor{keywordflow}{except} database.DoesNotExist:
00460                 data = database(identity=uid, field=field.upper(), value=newdata)
00461             \textcolor{comment}{# Salva os novos dados no database.}
00462             data.save()
00463 
00464         \textcolor{keywordflow}{except} ( database.DoesNotExist, 
00465                  database.MultipleObjectsReturned ) \textcolor{keyword}{as} exc:
00466             \textcolor{keywordflow}{raise} ValueError(exc)
00467 
\end{DoxyCode}


A documentação para esta classe foi gerada a partir do seguinte arquivo\+:\begin{DoxyCompactItemize}
\item 
E\+L\+O/\+Adm/\hyperlink{AdmUnit_8py}{Adm\+Unit.\+py}\end{DoxyCompactItemize}
